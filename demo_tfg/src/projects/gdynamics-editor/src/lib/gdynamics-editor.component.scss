//TODO: CHANGE ICON URL // set the parameter of the icon itself
// size is important here since we're setting our image to "contain"
$color_1: #666;
$color_2: #444;
$color_3: black;
$background-color_1: silver;

#editor {
    background: white;
    color: $color_3;
    background-clip: padding-box;
    border-radius: 4px;
    border: 2px solid rgba(0, 0, 0, 0.2);
    padding: 5px 0;
    margin-bottom: 23px;


    //inside editor
    /* Make sure li selections wrap around markers */
    /* Protect against generic img rules */
    @keyframes ProseMirror-cursor-blink {
        to {
            visibility: hidden;
        }
    }

    /* Add space around the hr to make clicking it easier */
    .ProseMirror {
        position: relative;
        word-wrap: break-word;
        white-space: pre-wrap;
        white-space: break-spaces;
        -webkit-font-variant-ligatures: none;
        font-variant-ligatures: none;
        //font-feature-settings: "liga"0;
        padding: 4px 8px 4px 14px;
        line-height: 1.2;
        outline: none;

        pre {
            white-space: pre-wrap;
        }

        li {
            position: relative;
        }

        ul {
            padding-left: 30px;
        }

        ol {
            padding-left: 30px;
        }

        blockquote {
            padding-left: 1em;
            border-left: 3px solid #eee;
            margin-left: 0;
            margin-right: 0;
        }

        p {
            &:first-child {
                margin-top: 10px;
            }

            margin-bottom: 1em;
            color:blue;
        }

        h1 {
            &:first-child {
                margin-top: 10px;
            }
        }

        h2 {
            &:first-child {
                margin-top: 10px;
            }
        }

        h3 {
            &:first-child {
                margin-top: 10px;
            }
        }

        h4 {
            &:first-child {
                margin-top: 10px;
            }
        }

        h5 {
            &:first-child {
                margin-top: 10px;
            }
        }

        h6 {
            &:first-child {
                margin-top: 10px;
            }
        }
    }

    .ProseMirror-hideselection {
        * {
            &::selection {
                background: transparent;
            }

            &::-moz-selection {
                background: transparent;
            }
        }

        caret-color: transparent;
    }

    .ProseMirror-selectednode {
        outline: 2px solid #8cf;
    }

    li.ProseMirror-selectednode {
        outline: none;

        &:after {
            content: "";
            position: absolute;
            left: -32px;
            right: -2px;
            top: -2px;
            bottom: -2px;
            border: 2px solid #8cf;
            pointer-events: none;
        }
    }

    img.ProseMirror-separator {
        display: inline !important;
        border: none !important;
        margin: 0 !important;
    }

    .ProseMirror-textblock-dropdown {
        min-width: 3em;
    }

    .ProseMirror-menu {
        margin: 0 -4px;
        line-height: 1;
    }

    .ProseMirror-tooltip {
        .ProseMirror-menu {
            width: -webkit-fit-content;
            width: fit-content;
            white-space: pre;
        }
    }

    .ProseMirror-menuitem {
        margin-right: 3px;
        display: inline-block;
    }

    .ProseMirror-menuseparator {
        border-right: 1px solid #ddd;
        margin-right: 3px;
    }

    .ProseMirror-menu-dropdown {
        font-size: 90%;
        white-space: nowrap;
        vertical-align: 1px;
        cursor: pointer;
        position: relative;
        padding-right: 15px;

        &:after {
            content: "";
            border-left: 4px solid transparent;
            border-right: 4px solid transparent;
            border-top: 4px solid currentColor;
            opacity: .6;
            position: absolute;
            right: 4px;
            top: calc(50% - 2px);
        }
    }

    .ProseMirror-menu-dropdown-menu {
        font-size: 90%;
        white-space: nowrap;
        position: absolute;
        background: white;
        color: $color_1;
        border: 1px solid #aaa;
        padding: 2px;
        z-index: 15;
        min-width: 6em;
    }

    .ProseMirror-menu-dropdown-wrap {
        padding: 1px 0 1px 4px;
        display: inline-block;
        position: relative;
    }

    .ProseMirror-menu-submenu {
        position: absolute;
        background: white;
        color: $color_1;
        border: 1px solid #aaa;
        padding: 2px;
        display: none;
        min-width: 4em;
        left: 100%;
        top: -3px;
    }

    .ProseMirror-menu-dropdown-item {
        cursor: pointer;
        padding: 2px 8px 2px 4px;

        &:hover {
            background: #f2f2f2;
        }
    }

    .ProseMirror-menu-submenu-wrap {
        position: relative;
        margin-right: -4px;

        &:hover {
            .ProseMirror-menu-submenu {
                display: block;
            }
        }
    }

    .ProseMirror-menu-submenu-label {
        &:after {
            content: "";
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
            border-left: 4px solid currentColor;
            opacity: .6;
            position: absolute;
            right: 4px;
            top: calc(50% - 4px);
        }
    }

    .ProseMirror-menu-active {
        background: #eee;
        border-radius: 4px;
    }

    .ProseMirror-menu-disabled {
        opacity: .3;
    }

    .ProseMirror-menu-submenu-wrap-active {
        .ProseMirror-menu-submenu {
            display: block;
        }
    }

    .ProseMirror-menubar {
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
        position: relative;
        min-height: 1em;
        color: $color_1;
        padding: 1px 6px;
        top: 0;
        left: 0;
        right: 0;
        border-bottom: 1px solid silver;
        background: white;
        z-index: 10;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        overflow: visible;
    }

    .ProseMirror-icon {
        display: inline-block;
        line-height: .8;
        vertical-align: -2px;
        padding: 2px 8px;
        cursor: pointer;

        svg {
            fill: currentColor;
            height: 1em;
        }

        span {
            vertical-align: text-top;
        }
    }

    .ProseMirror-menu-disabled.ProseMirror-icon {
        cursor: default;
    }

    .ProseMirror-gapcursor {
        display: none;
        pointer-events: none;
        position: absolute;

        &:after {
            content: "";
            display: block;
            position: absolute;
            top: -2px;
            width: 20px;
            border-top: 1px solid black;
            animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
        }
    }

    .ProseMirror-focused {
        .ProseMirror-gapcursor {
            display: block;
        }
    }

    .ProseMirror-example-setup-style {
        hr {
            padding: 2px 10px;
            border: none;
            margin: 1em 0;

            &:after {
                content: "";
                display: block;
                height: 1px;
                background-color: $background-color_1;
                line-height: 2px;
            }
        }

        img {
            cursor: default;
        }
    }

    .ProseMirror-prompt {
        background: white;
        padding: 5px 10px 5px 15px;
        border: 1px solid silver;
        position: fixed;
        border-radius: 3px;
        z-index: 11;
        box-shadow: -.5px 2px 5px rgba(0, 0, 0, .2);

        h5 {
            margin: 0;
            font-weight: normal;
            font-size: 100%;
            color: $color_2;
        }

        input[type="text"] {
            background: #eee;
            border: none;
            outline: none;
            padding: 0 4px;
        }

        textarea {
            background: #eee;
            border: none;
            outline: none;
        }
    }

    .ProseMirror-prompt-close {
        position: absolute;
        left: 2px;
        top: 1px;
        color: $color_1;
        border: none;
        background: transparent;
        padding: 0;

        &:after {
            content: "âœ•";
            font-size: 12px;
        }
    }

    .ProseMirror-invalid {
        background: #ffc;
        border: 1px solid #cc7;
        border-radius: 4px;
        padding: 5px 10px;
        position: absolute;
        min-width: 10em;
    }

    .ProseMirror-prompt-buttons {
        margin-top: 5px;
        display: none;
    }
}


// // crear clases del css dinámicamente por cada tipo que se consulta en la BD
// span.tag-OPE::after {
//     content: "OPE";
//     margin: 8px;
//     background-color: #dee;
//     padding: 6px;
//     border: 1px solid #AAA;
//     border-radius: 5px;
// }

// .tag-OPE::after {
//     content: "OPE";
//     margin: 8px;
//     background-color: #dee;
//     padding: 6px;
//     border: 1px solid #AAA;
//     border-radius: 5px;
// }

// .tag-DUE::after {
//     content: "DUE";
//     margin: 8px;
//     background-color: #dee;
//     padding: 6px;
//     border: 1px solid #AAA;
//     border-radius: 5px;
// }

// .tag-TCAE::after {
//     content: "TCAE";
//     margin: 8px;
//     background-color: #dee;
//     padding: 6px;
//     border: 1px solid #AAA;
//     border-radius: 5px;
// }



.icon-bg {
    display: inline-block;
    vertical-align: bottom; // This is the same alignment as .svg-icon
    pointer-events: none; // SVGs can troll the parent's events. Disabling this ensures we aren't showing tooltips more than once.
    border: none;
    height: 18px;
    width: 18px;
    padding: 0;

    // use ::after so we can theme our icons without affecting the mask
    // useful for e.g. setting the background-color for buttons, etc
    &::after {
        content: "";
        height: 100%;
        width: 100%;
        display: inline-block;
        background-color: currentColor;
        -webkit-mask: var(--bg-icon) no-repeat center;
        mask: var(--bg-icon) no-repeat center;
        -webkit-mask-size: contain;
        mask-size: contain;
    }

    &.iconBold {
        --bg-icon: url("./img/icons/Bold.svg");
    }

    &.iconHeader {
        --bg-icon: url("./img/icons/Header.svg");
    }

    &.iconItalic {
        --bg-icon: url("./img/icons/Italic.svg");
    }

    &.iconCode {
        --bg-icon: url("./img/icons/Code.svg");
    }

    &.iconStrikethrough {
        --bg-icon: url("./img/icons/Strikethrough.svg");
    }

    &.iconLink {
        --bg-icon: url("./img/icons/Link.svg");
    }

    &.iconQuote {
        --bg-icon: url("./img/icons/Quote.svg");
    }

    &.iconCodeblock {
        --bg-icon: url("./img/icons/Codeblock.svg");
    }

    &.iconImage {
        --bg-icon: url("./img/icons/Image.svg");
    }

    &.iconTable {
        --bg-icon: url("./img/icons/Table.svg");
    }

    &.iconOrderedList {
        --bg-icon: url("./img/icons/OrderedList.svg");
    }

    &.iconUnorderedList {
        --bg-icon: url("./img/icons/UnorderedList.svg");
    }

    &.iconHorizontalRule {
        --bg-icon: url("./img/icons/HorizontalRule.svg");
    }

    &.iconUndo {
        --bg-icon: url("./img/icons/Undo.svg");
    }

    &.iconRedo {
        --bg-icon: url("./img/icons/Redo.svg");
    }

    &.iconRefresh {
        --bg-icon: url("./img/icons/Refresh.svg");
    }

    &.iconWrapin {
        --bg-icon: url("./img/icons/WrapIn.svg");
    }


    //TODO cambiar esto
    &.iconHeading1 {
        --bg-icon: url("./img/icons/Header.svg");
    }

    &.iconHeading2 {
        --bg-icon: url("./img/icons/Header.svg");
    }

    &.iconHeading3 {
        --bg-icon: url("./img/icons/Header.svg");
    }
}